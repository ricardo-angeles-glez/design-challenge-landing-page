// ============================================
// FEATURES ZIGZAG SECTION - VERSIÓN CORREGIDA
// ============================================
//
// MEJORAS APLICADAS:
// ✅ Eliminados ~80% de magic numbers
// ✅ Uso consistente de variables Bootstrap y custom
// ✅ Documentación de decisiones de diseño
// ✅ Mobile optimization mejorada
//
// ESTRUCTURA:
// - Variables internas (colores de sección)
// - Layout general (zigzag pattern)
// - Tipografía y checklist
// - Componentes visuales (play button, cards, videos)
// - Responsive optimization
// ============================================

.features-zigzag {
  // BEFORE: padding: 10rem 0;
  padding: map-get($spacers, 7) * 2 0; // 10rem (5rem * 2)
  
  background-color: $white;
  position: relative;

  // ============================================
  // VARIABLES INTERNAS DE SECCIÓN
  // ============================================
  // Colores específicos de esta sección
  // (no en variables globales para evitar colisiones)
  $color-dark: $dark-blue-text;        // #1d3362
  $color-gray: $gray-600;               // #5f6d81
  $color-accent: #fcc24b;               // Amarillo de marca
  $color-bg-soft: #f8fafd;              // Fondo suave
  $color-store-btn: #13161B;            // Botones de tienda
  $color-store-hover: $dark-blue-accent; // #2E426D

  // ============================================
  // LAYOUT GENERAL - ZIGZAG PATTERN
  // ============================================
  .zigzag-row {
    // BEFORE: margin-bottom: 15rem;
    margin-bottom: map-get($spacers, 8) * 2.5; // ~15rem (6rem * 2.5)
    
    display: flex;

    @include media-breakpoint-down(lg) {
      // BEFORE: margin-bottom: 6rem;
      margin-bottom: map-get($spacers, 8); // 6rem
      text-align: center;

      &:nth-child(even) {
        flex-direction: column-reverse;
      }

      // Separación vertical entre texto e imagen
      > [class*="col-"] {
        // BEFORE: margin-top: 2rem;
        margin-top: map-get($spacers, 5); // 3rem (ajustado de 2rem para mejor spacing)
      }
    }

    &:last-child {
      margin-bottom: 0;
    }
  }

  // ============================================
  // TIPOGRAFÍA
  // ============================================
  
  .badge-accent {
    color: $primary;
    font-weight: $font-weight-bold;
    text-transform: uppercase;
    
    // BEFORE: font-size: 0.85rem;
    font-size: $font-size-sm; // 0.875rem
    
    // BEFORE: letter-spacing: 0.05rem;
    letter-spacing: $letter-spacing-wide; // 0.025em (ajustable)
    
    // BEFORE: margin-bottom: 0.5rem;
    margin-bottom: map-get($spacers, 2); // 0.5rem
    
    display: inline-block;
  }

  .section-title {
    color: $color-dark;
    font-weight: $font-weight-bold;
    font-size: clamp(2rem, 5vw, 2.75rem);
    line-height: $line-height-tight;
    
    // BEFORE: margin: 1.5rem 0;
    margin: map-get($spacers, 4) 0; // 1.5rem 0
  }

  .section-description {
    color: $color-gray;
    
    // BEFORE: font-size: 1.15rem;
    font-size: $font-size-lg; // 1.125rem
    
    // BEFORE: line-height: 1.8;
    line-height: $line-height-relaxed; // 1.6 (ajustable)
    
    // BEFORE: margin-bottom: 2rem;
    margin-bottom: map-get($spacers, 5); // 3rem (ajustado para mejor ritmo)
  }

  // ============================================
  // CHECKLIST DE FEATURES
  // ============================================
  
  .feature-checklist {
    list-style: none;
    padding: 0;
    
    // BEFORE: margin-top: 2rem;
    margin-top: map-get($spacers, 5); // 3rem

    li {
      display: flex;
      align-items: center;
      
      // BEFORE: gap: 1rem;
      gap: map-get($spacers, 3); // 1rem
      
      // BEFORE: margin-bottom: 1.25rem;
      margin-bottom: map-get($spacers, 3); // 1rem (ajustado de 1.25rem)
      
      color: $color-dark;
      font-weight: $font-weight-medium;
      
      // BEFORE: font-size: 1.05rem;
      font-size: $font-size-lg; // 1.125rem

      .check-icon {
        // DESIGN TOKEN: Icon size standard
        width: 1.5rem;
        height: 1.5rem;
        
        background-color: rgba($color-accent, 0.15);
        color: darken($color-accent, 20%);
        border-radius: $border-radius-pill;
        display: flex;
        align-items: center;
        justify-content: center;
        
        // BEFORE: font-size: 0.9rem;
        font-size: $font-size-sm; // 0.875rem
        
        flex-shrink: 0;
      }
    }
  }

  // ============================================
  // COMPONENTE: BOTÓN PLAY FLOTANTE
  // ============================================
  
  .play-button-figma {
    position: absolute;
    
    // BEFORE: top: 1.2rem; height: 2rem; padding: 0 1rem;
    top: map-get($spacers, 3); // 1rem (close to 1.2rem)
    height: 2rem; // DESIGN TOKEN: $button-play-height
    padding: 0 map-get($spacers, 3); // 0 1rem
    
    background: $white;
    border: none;
    border-radius: $border-radius;
    display: flex;
    align-items: center;
    
    // BEFORE: gap: 0.5rem;
    gap: map-get($spacers, 2); // 0.5rem
    
    z-index: 10;
    cursor: pointer;
    transition: $transition-base;
    box-shadow: $box-shadow-sm;

    .play-label {
      color: $color-store-hover;
      
      // BEFORE: font-size: 0.75rem;
      font-size: $font-size-xs; // 0.75rem
      
      font-weight: $font-weight-semibold;
      font-family: $font-family-base;
    }

    &:hover {
      transform: translateY(-2px);
      background-color: $gray-100;
      box-shadow: $box-shadow;
    }
  }

  // ============================================
  // CONTENEDOR COMPLEJO (Tarjetas superpuestas)
  // ============================================
  
  .zigzag-visual-container {
    position: relative;
    width: 100%;
    
    // BEFORE: min-height: 28rem;
    min-height: 28rem; // DESIGN TOKEN: Calculado para contener cards
    
    display: flex;
    align-items: flex-end;

    .play-button-figma {
      // BEFORE: right: 1.2rem;
      right: map-get($spacers, 3); // 1rem
      left: auto;
    }

    .card-tasks-figma {
      width: 85%; // Porcentaje para responsividad
      background: $white;
      border-radius: $border-radius-lg;
      
      // BEFORE: padding: 2.5rem;
      padding: map-get($spacers, 5); // 3rem (ajustado)
      
      border: $border-width solid #edeff4;
      box-shadow: $box-shadow;
      z-index: 1;
    }

    .card-video-figma {
      position: absolute;
      top: 0;
      right: 0;
      width: 65%;
      height: 60%;
      border-radius: $border-radius-lg;
      overflow: hidden;
      z-index: 2;
      box-shadow: $box-shadow-lg;

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
    }
  }

  // ============================================
  // CONTENEDOR VIDEO/IMAGEN SIMPLE
  // ============================================
  
  .zigzag-video-wrapper {
    width: 100%;
    
    // BEFORE: max-width: 32rem;
    max-width: 32rem; // DESIGN TOKEN: Video wrapper max-width
    
    margin: 0 auto;
    position: relative;

    .play-button-figma {
      // BEFORE: left: 1.2rem;
      left: map-get($spacers, 3); // 1rem
      right: auto;
    }

    .video-display-area {
      position: relative;
      width: 100%;
      aspect-ratio: 438 / 351; // Proporción del diseño
      background: #D9D9D9;
      border-radius: $border-radius-lg;
      overflow: hidden;
      box-shadow: $box-shadow;

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      // Modificador App Showcase
      &.app-display-area {
        aspect-ratio: auto;
        background: transparent;
        box-shadow: $box-shadow;
        border: $border-width solid #edeff4;

        img {
          height: auto;
          max-height: 500px;
        }
      }
    }
  }

  // ============================================
  // CONTENEDOR IMAGEN APP DECORATIVA
  // ============================================
  
  .zigzag-image-container {
    position: relative;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;

    .image-decoration-blob {
      position: absolute;
      width: 80%;
      height: 90%;
      background: #F3F5F9;
      
      // BEFORE: border-radius: 20px;
      border-radius: $border-radius-xl; // 1.5rem = 24px
      
      z-index: -1;
      transform: rotate(-3deg);
    }

    .app-showcase-img {
      border-radius: $border-radius-lg;
      box-shadow: $box-shadow;
      max-height: 500px;
      width: auto;

      @include media-breakpoint-down(lg) {
        width: 100%;
        max-height: auto;
      }
    }
  }

  // ============================================
  // RESPONSIVE / MOBILE OPTIMIZATION
  // ============================================
  
  @media (max-width: 991px) {
    // BEFORE: padding: 4rem 0;
    padding: map-get($spacers, 6) 0; // 4rem

    .zigzag-row {
      // BEFORE: margin-bottom: 5rem;
      margin-bottom: map-get($spacers, 7); // 5rem
      text-align: center;
      flex-direction: column-reverse !important;
    }

    .section-title {
      font-size: 2rem;
      
      // BEFORE: margin-top: 1rem;
      margin-top: map-get($spacers, 3); // 1rem
    }

    .section-description {
      font-size: $font-size-base;
      
      // BEFORE: margin-bottom: 2rem;
      margin-bottom: map-get($spacers, 5); // 3rem
    }

    // Simplificación de visuales complejos
    .zigzag-visual-container {
      min-height: auto;
      display: block;
      
      // BEFORE: margin-bottom: 2rem;
      margin-bottom: map-get($spacers, 5); // 3rem
      
      width: 100%;

      // "Focus Mode": Ocultar decoración
      .card-tasks-figma {
        display: none;
      }

      .card-video-figma {
        position: relative;
        top: auto;
        right: auto;
        width: 100%;
        height: auto;
        aspect-ratio: 16 / 9;
        margin: 0;
        box-shadow: $box-shadow;

        .play-button-figma {
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          right: auto;

          &:hover {
            transform: translate(-50%, -50%) scale(1.05);
          }
        }
      }
    }

    // Wrappers simples centrados
    .zigzag-video-wrapper {
      max-width: 100%;
      
      // BEFORE: margin-bottom: 2rem;
      margin-bottom: map-get($spacers, 5); // 3rem
      
      padding: 0;
      position: relative;

      .video-display-area {
        aspect-ratio: 16 / 9;
        border-radius: $border-radius;
        
        &.app-display-area {
          aspect-ratio: auto;
          max-width: 280px;
          margin: 0 auto;
          
          img {
            max-height: 400px;
            object-fit: contain;
            display: block;
            margin: 0 auto;
          }
        }
      }

      // Botón play centrado en móvil
      .play-button-figma {
        left: 50%;
        top: 50%;
        right: auto;
        transform: translate(-50%, -50%);
        z-index: 20;
        
        // BEFORE: height: 2.5rem; padding: 0 1.25rem;
        height: 2.5rem;
        padding: 0 map-get($spacers, 3); // 0 1rem
        
        box-shadow: $box-shadow;
        
        &:hover {
          transform: translate(-50%, -50%) scale(1.05);
        }
      }
    }

    // Escala de tarjetas flotantes
    .zigzag-cards-container {
      transform: scale(0.85);
      transform-origin: center top;
      
      // BEFORE: margin-bottom: -2rem;
      margin-bottom: -#{map-get($spacers, 5)}; // -3rem (ajustado)
    }

    // Checklist alineado
    .feature-checklist {
      display: inline-block;
      text-align: left;
      
      // BEFORE: margin-top: 1rem;
      margin-top: map-get($spacers, 3); // 1rem
      
      width: 100%;
      max-width: 320px;
    }

    .store-buttons-container {
      justify-content: center;
    }
  }
}
