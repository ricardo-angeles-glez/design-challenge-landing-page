// ============================================
// FEATURES ZIGZAG SECTION (COMPLETO)
// ============================================

.features-zigzag {
  padding: 10rem 0;
  background-color: #ffffff;
  position: relative;

  // --- VARIABLES INTERNAS ---
  $color-dark: #1d3362;
  $color-gray: #5f6d81;
  $color-accent: #fcc24b;
  $color-bg-soft: #f8fafd;
  $color-store-btn: #13161B;
  $color-store-hover: #2E426D;

  // --- LAYOUT GENERAL ---
  .zigzag-row {
    margin-bottom: 15rem;
    display: flex; // Aseguramos flex por si bootstrap no está cargando bien

    @include media-breakpoint-down(lg) {
      margin-bottom: 6rem;
      text-align: center;

      &:nth-child(even) {
        flex-direction: column-reverse;
      }

      // Separación vertical en móvil entre texto e imagen
      >[class*="col-"] {
        margin-top: 2rem;
      }
    }

    &:last-child {
      margin-bottom: 0;
    }
  }

  // --- TIPOGRAFÍA ---
  .badge-accent {
    color: $primary; // Asegúrate de tener $primary definido, o usa #0d6efd
    font-weight: 700;
    text-transform: uppercase;
    font-size: 0.85rem;
    letter-spacing: 0.05rem;
    margin-bottom: 0.5rem;
    display: inline-block;
  }

  .section-title {
    color: $color-dark;
    font-weight: 700;
    font-size: clamp(2rem, 5vw, 2.75rem);
    line-height: 1.1;
    margin: 1.5rem 0;
  }

  .section-description {
    color: $color-gray;
    font-size: 1.15rem;
    line-height: 1.8;
    margin-bottom: 2rem;
  }

  // --- CHECKLIST ---
  .feature-checklist {
    list-style: none;
    padding: 0;
    margin-top: 2rem;

    li {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.25rem;
      color: $color-dark;
      font-weight: 500;
      font-size: 1.05rem;

      .check-icon {
        width: 1.5rem;
        height: 1.5rem;
        background-color: rgba($color-accent, 0.15);
        color: darken($color-accent, 20%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.9rem;
        flex-shrink: 0;
      }
    }
  }


  // --- COMPONENTE: BOTÓN PLAY FLOTANTE ---
  .play-button-figma {
    position: absolute;
    top: 1.2rem;
    height: 2rem;
    padding: 0 1rem;
    background: #ffffff;
    border: none;
    border-radius: .5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    z-index: 10;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.1);

    .play-label {
      color: #2E426D;
      font-size: 0.75rem;
      font-weight: 600;
      font-family: 'Inter', sans-serif;
    }

    &:hover {
      transform: translateY(-2px);
      background-color: #f8f9fa;
      box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    }
  }

  // --- VISUALES: CONTENEDORES DE IMAGEN/VIDEO ---

  // 1. Contenedor Complejo (Tarjetas superpuestas)
  .zigzag-visual-container {
    position: relative;
    width: 100%;
    min-height: 28rem;
    display: flex;
    align-items: flex-end;

    // Botón play a la derecha en este contexto
    .play-button-figma {
      right: 1.2rem;
      left: auto;
    }

    .card-tasks-figma {
      width: 85%;
      background: #fff;
      border-radius: 1rem;
      padding: 2.5rem;
      border: 1px solid #edeff4;
      box-shadow: 0 2rem 4rem rgba(0, 0, 0, 0.05);
      z-index: 1;
    }

    .card-video-figma {
      position: absolute;
      top: 0;
      right: 0;
      width: 65%;
      height: 60%;
      border-radius: 1rem;
      overflow: hidden;
      z-index: 2;
      box-shadow: 0 2.5rem 5rem rgba(0, 0, 0, 0.15);

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
    }
  }

  // 2. Contenedor Video/Imagen Simple
  .zigzag-video-wrapper {
    width: 100%;
    max-width: 32rem;
    margin: 0 auto;
    position: relative;

    // Botón play a la izquierda en este contexto
    .play-button-figma {
      left: 1.2rem;
      right: auto;
    }

    .video-display-area {
      position: relative;
      width: 100%;
      aspect-ratio: 438 / 351;
      background: #D9D9D9;
      border-radius: 1rem;
      overflow: hidden;
      box-shadow: 0 2rem 4rem rgba(0, 0, 0, 0.08);

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      // Modificador App Showcase (Screenshots verticales)
      &.app-display-area {
        aspect-ratio: auto;
        background: transparent;
        box-shadow: 0 2rem 4rem rgba(29, 51, 98, 0.12);
        border: 1px solid #edeff4;

        img {
          height: auto;
          max-height: 500px;
        }
      }
    }
  }

  // 3. Contenedor Imagen App Decorativa (Zigzag 4)
  .zigzag-image-container {
    position: relative;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;

    // Blob decorativo detrás
    .image-decoration-blob {
      position: absolute;
      width: 80%;
      height: 90%;
      background: #F3F5F9;
      border-radius: 20px;
      z-index: -1;
      transform: rotate(-3deg);
    }

    .app-showcase-img {
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(46, 66, 109, 0.1);
      max-height: 500px;
      width: auto;

      @include media-breakpoint-down(lg) {
        width: 100%;
        max-height: auto;
      }
    }
  }

  // --- RESPONSIVE / MOBILE OPTIMIZATION ---
  // Objetivo: Escaneo rápido y baja carga cognitiva
  @media (max-width: 991px) {
    padding: 4rem 0; // Reducimos padding vertical drásticamente

    // 1. Reordenamiento y Espaciado
    .zigzag-row {
      margin-bottom: 5rem; // Menos separación entre bloques
      text-align: center; // Centramos todo para mejor lectura móvil

      // Forzamos que el TEXTO siempre vaya primero
      // Esto es crucial para la carga cognitiva: Título -> Contexto -> Imagen
      flex-direction: column-reverse !important;

      // Excepto si ya está configurado (como el zigzag 2 y 4), 
      // aseguramos que el texto (columna con order-2) suba.
      // NOTA: Si usas bootstrap 'order-lg-x', en móvil el orden es natural.
      // Simplemente asegúrate en tu HTML que la columna de texto esté PRIMERO en el flujo DOM 
      // o usa flex-direction: column-reverse si la imagen está primero.
    }

    .section-title {
      font-size: 2rem; // Títulos más manejables
      margin-top: 1rem;
    }

    .section-description {
      font-size: 1rem;
      margin-bottom: 2rem;
    }

    // 2. Simplificación de Visuales Complejos (Zigzag 1)
    .zigzag-visual-container {
      min-height: auto;
      display: block; // Quitamos el flex layout complejo
      margin-bottom: 2rem; // Espacio entre imagen y texto
      width: 100%;

      // ESTRATEGIA: "Focus Mode"
      // Ocultamos la tarjeta de fondo ("Tasks list") en móvil.
      // Aporta decoración en desktop, pero en móvil es ruido visual.
      .card-tasks-figma {
        display: none;
      }

      // Dejamos solo la tarjeta principal (Video/Imagen)
      .card-video-figma {
        position: relative; // Ya no es absolute
        top: auto;
        right: auto;
        width: 100%; // Ocupa todo el ancho disponible
        height: auto;
        aspect-ratio: 16 / 9; // Formato video estándar
        margin: 0;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); // Sombra más suave

        // Ajustamos el botón play para que esté centrado en móvil
        // (Opcional, si prefieres centrado en lugar de esquinas)
        .play-button-figma {
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          right: auto;

          &:hover {
            transform: translate(-50%, -50%) scale(1.05);
          }
        }
      }
    }

        // 3. Simplificación de Wrappers Simples (Zigzag 2 y 4)
    .zigzag-video-wrapper {
      max-width: 100%;
      margin-bottom: 2rem;
      padding: 0;
      position: relative; // Asegura que el botón se posicione relativo a esto

      .video-display-area {
        aspect-ratio: 16 / 9;
        border-radius: 0.75rem;
        
        // Caso especial App Showcase (Screenshots verticales)
        &.app-display-area {
            aspect-ratio: auto;
            max-width: 280px; // Ancho controlado del celular
            margin: 0 auto; // Centrado horizontal
            
            img {
                max-height: 400px;
                object-fit: contain;
                display: block; // Elimina espacios fantasma abajo
                margin: 0 auto; // Asegura centrado de la imagen
            }
        }
      }

      // --- CORRECCIÓN BOTÓN PLAY EN MÓVIL ---
      .play-button-figma {
        // Reseteamos la posición de Desktop (que era left: 1.2rem)
        left: 50%;
        top: 50%;
        right: auto; // Importante resetear
        
        // Lo centramos matemáticamente
        transform: translate(-50%, -50%);
        
        // Aseguramos que esté encima
        z-index: 20;
        
        // Opcional: Hacerlo un pelín más grande en móvil para facilitar el dedo
        height: 2.5rem; 
        padding: 0 1.25rem;
        
        // Sombra más fuerte para que destaque sobre cualquier imagen
        box-shadow: 0 0.5rem 1.5rem rgba(0,0,0,0.2);
        
        &:hover {
           transform: translate(-50%, -50%) scale(1.05);
        }
      }
    }

    // 4. Simplificación de Zigzag 3 (Tarjetas Flotantes)
    // Si tienes un contenedor de tarjetas dispersas, escalémoslo 
    // para que quepa en pantalla sin scroll
    .zigzag-cards-container {
      transform: scale(0.85); // Hacemos todo el conjunto un 15% más pequeño
      transform-origin: center top;
      margin-bottom: -2rem; // Compensamos el espacio vacío que deja el scale
    }

    // Checklist alineado
    .feature-checklist {
      display: inline-block;
      text-align: left;
      margin-top: 1rem;
      width: 100%;
      max-width: 320px;
    }

    // Botones de tienda centrados
    .store-buttons-container {
      justify-content: center;
    }
  }
}